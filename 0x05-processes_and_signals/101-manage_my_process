#!/usr/bin/env bash
# This script will manages manage_my_process

while true; do
    echo "Usage: manage_my_process {start|stop|restart}"

    read -p "Enter your command: " command

    case "$command" in
        "start")
            ./manage_my_process &
            touch /var/run/my_process.pid
            echo "$!" > /var/run/my_process.pid
            echo "manage_my_process started"
            ;;
        "stop")
            if [ -f "/var/run/my_process.pid" ]; then
                process_pid=$(cat /var/run/my_process.pid)
                kill "$process_pid"
                rm -f /var/run/my_process.pid
                echo "manage_my_process stopped"
            else
                echo "No running process found"
            fi
            ;;
        "restart")
            if [ -f "/var/run/my_process.pid" ]; then
                process_pid=$(cat /var/run/my_process.pid)
                kill "$process_pid"
                rm -f /var/run/my_process.pid
            fi
            ./manage_my_process &
            touch /var/run/my_process.pid
            echo "$!" > /var/run/my_process.pid
            echo "manage_my_process restarted"
            ;;
        *)
            echo "Invalid command. Please try again."
            ;;
    esac
done
