#!/usr/bin/env bash
# This script will manages manage_my_process

PIDFILE=/var/run/my_process.pid

start() {
    ./manage_my_process &
    echo "$!" > "$PIDFILE"
}

stop() {
    sudo kill -15 "$(cat "$PIDFILE")" && rm -f "$PIDFILE"
}

while true; do
    echo "Enter a command (start, stop, restart, exit):"
    read command

    case "$command" in
        start)
            start
            echo "manage_my_process started"
            ;;
        stop)
            stop
            echo "manage_my_process stopped"
            ;;
        restart)
            stop
            start
            echo "manage_my_process restarted"
            ;;
        exit)
            echo "Exiting manage_my_process script..."
            exit 0
            ;;
        *)
            echo "Invalid command. Usage: {start|stop|restart|exit}"
            ;;
    esac
done
